add_namespace = nf_SAV
# peace with reich
country_event = {
    id = nf_SAV.1
    title = nf_SAV.1.t
    desc = nf_SAV.1.d
    picture = "GFX_event (42)"
	trigger = {
		RCH = {
			controls_state = 312
		}
	}

	fire_only_once = yes

	mean_time_to_happen = {
		days = 1
	}

	option = { # accept
		name = nf_SAV.1.a
		ai_chance = {
			base = 50
		}
		RCH = {
            transfer_state = 120
            transfer_state = 312
            transfer_state = 181
            white_peace = SAV
			country_event = { id = nf_RCH.4 days = 1 }
		}
	}

	option = { # refuse
		name = nf_SAV.1.b
		ai_chance = {
			base = 0
		}
		RCH = {
			country_event = { id = nf_RCH.5 days = 1 }
		}
	}
}

country_event = {	### KTG stuff but for SAV
    id = nf_SAV.2
    title = nf_SAV.2.t
    desc = nf_SAV.2.d
    picture = "GFX_event (145)"
	is_triggered_only = yes
	fire_only_once = yes
	option = { 
		name = nf_SAV.2.a
		add_timed_idea = { idea = SAT_excursion days = 100 }
		ai_chance = {
			base = 0
		}
	}
}

### Disintergration of the Alliance
country_event = {
    id = nf_SAV.3
    title = nf_SAV.3.t
    desc = nf_SAV.3.d
    picture = "GFX_event (207)"

	trigger = {
		date > 2033.1.1
		NOT = { 312 = { is_owned_by = ROOT } }
		368 = { is_owned_by = ROOT }
	}
	fire_only_once = yes

	immediate = { release = DIM } 

	option = {
		name = nf_SAV.3.a
		if = {
			limit = { has_idea = SAV_alliance }
			remove_ideas = SAV_alliance
		}
		hidden_effect = {
			if = {
				limit = {
					113 = {
						is_owned_by = SAV
					}
				}
				DIM = {
					transfer_state = 113
				}
			}
			SAV = {
				remove_state_core = 120
				remove_state_core = 312
				remove_state_core = 181
				remove_state_core = 303
			}
			set_country_flag = SAV_disintegrated_flag
			SAV_set_disintegrated_cosmetic_tag = yes
		}

		if = {
			limit = {
				has_country_leader = {
					character = SAV_vasyurkov
					ruling_only = yes
				}
			}
			retire_character = SAV_vasyurkov
			add_country_leader_role = {
			    character = SAV_sergey_mikhailovich_reznitsyn
			    promote_leader = yes
			    country_leader = {
			        ideology = democratic_republic
			        expire = "2100.1.1"
			        traits = { SAV_sergey_mikhailovich_reznitsyn_leader_trait }
			    }
			}
		}
	}
}

#country_event = {
#    id = nf_SAV.4
#    title = nf_SAV.4.t
#    desc = nf_SAV.4.d
#    picture = ccc_mutant
#	is_triggered_only = yes
#	fire_only_once = yes
#	option = {
#		name = nf_SAV.4.a
#		add_power_balance_value = {
#			id = SAV_power_balance
#			value = 0.1
#		}
#		ai_chance = {
#			factor = 5
#		}
#	}
#}

country_event = {
    id = nf_SAV.5
    title = nf_SAV.5.t
    desc = nf_SAV.5.d
    picture = "GFX_event (164)"
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = nf_SAV.5.b
		custom_effect_tooltip = nf_SAV.5.b.tt
		add_ideas = SAV_flamethrower_tinkering
		hidden_effect = {
			country_event = {
				id = nf_SAV.6 days = 200 random_days = 200
			}
		}
		ai_chance = {
			factor = 5
		}
	}
}

country_event = {
    id = nf_SAV.6
    title = nf_SAV.6.t
    desc = nf_SAV.6.d
    picture = "GFX_event (91)"
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = nf_SAV.6.a
		remove_ideas = SAV_flamethrower_tinkering
		capital_scope = {
			add_resource = {
				type = scrap
				amount = 2
			}
		}
		ai_chance = {
			factor = 5
		}
	}
	option = {
		name = nf_SAV.6.b
		custom_effect_tooltip = nf_SAV.6.b.tt
		swap_ideas = {
			remove_idea = SAV_flamethrower_tinkering
			add_idea = SAV_flamethrower_tinkering_2
		}
		hidden_effect = {
			country_event = {
				id = nf_SAV.7 days = 200 random_days = 200
			}
		}
		ai_chance = {
			factor = 5
		}
	}
}

country_event = {
    id = nf_SAV.7
    title = nf_SAV.7.t
    desc = nf_SAV.7.d
    picture = "GFX_event (40)"
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = nf_SAV.7.a
		swap_ideas = {
			remove_idea = SAV_flamethrower_tinkering_2
			add_idea = SAV_flamethrower_tinkering_3
		}
		add_tech_bonus = {
			name = infantry_bonus
			bonus = 1
			uses = 1
			ahead_reduction = 3
			technology = tech_flamethrower_equipment_2
		}
		ai_chance = {
			factor = 5
		}
	}
}

country_event = {
    id = nf_SAV.8
    title = nf_SAV.8.t
    desc = nf_SAV.8.d
    picture = "GFX_event (55)"
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = nf_SAV.8.a
		add_political_power = 100
		add_stability = 0.1
		set_cosmetic_tag = SAV_commonwealth
		ai_chance = {
			factor = 5
		}
	}
}

add_namespace = nf_SAV_trade

country_event = {
    id = nf_SAV_trade.1
    title = nf_SAV_trade.1.t
    desc = nf_SAV_trade.1.d
    picture = "GFX_event (56)"

	is_triggered_only = yes
	fire_only_once = yes

	option = { # accept
		name = nf_SAV_trade.1.a
		add_opinion_modifier = {
			target = MEN
			modifier = PLS_support
		}
		MEN = {
			add_opinion_modifier = {
				target = SAV
				modifier = PLS_support
			}
		}
		ai_chance = {
			base = 50
		}
	}
}

add_namespace = nf_SAV_dimitrovskaya

country_event = {
    id = nf_SAV_dimitrovskaya.1
    title = nf_SAV_dimitrovskaya.1.t
    desc = nf_SAV_dimitrovskaya.1.d
    picture = "GFX_event (114)"

	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		hidden_effect = {
			368 = {
				add_core_of = DIM
			}
		}
	}

	option = {
		name = nf_SAV_dimitrovskaya.1.a
		368 = {
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
			    instant_build = yes
			}
		}
		hidden_effect = {
			country_event = {
				id = nf_SAV_dimitrovskaya.2 days = 100 random_days = 100
			}
		}
		ai_chance = {
			base = 50
		}
	}
}

country_event = {
    id = nf_SAV_dimitrovskaya.2
    title = nf_SAV_dimitrovskaya.2.t
    desc = nf_SAV_dimitrovskaya.2.d
    picture = "GFX_event (146)"

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = nf_SAV_dimitrovskaya.2.a
		368 = {
			add_manpower = 20
		}
		hidden_effect = {
			country_event = {
				id = nf_SAV_dimitrovskaya.3 days = 180 random_days = 180
			}
		}
		ai_chance = {
			base = 50
		}
	}
}

country_event = {
    id = nf_SAV_dimitrovskaya.3
    title = nf_SAV_dimitrovskaya.3.t
    desc = nf_SAV_dimitrovskaya.3.d
    picture = "GFX_event (173)"

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = nf_SAV_dimitrovskaya.3.a
		add_stability = -0.05
		add_power_balance_value = {
			id = SAV_power_balance
			value = -0.05
		}
		custom_effect_tooltip = nf_SAV_dimitrovskaya.3.a.tt
		hidden_effect = {
			set_country_flag = SAV_satanist_country_flag
			country_event = {
				id = nf_SAV_dimitrovskaya.4 days = 360 random_days = 360
			}
			country_event = {
				id = nf_SAV_politics.1 days = 150 random_days = 150
			}
			country_event = {
				id = nf_SAV_politics.1 days = 90 random_days = 90
			}
		}
		ai_chance = {
			base = 50
		}
	}
}

country_event = {
    id = nf_SAV_dimitrovskaya.4
    title = nf_SAV_dimitrovskaya.4.t
    desc = nf_SAV_dimitrovskaya.4.d
    picture = "GFX_event (122)"

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = nf_SAV_dimitrovskaya.4.a
		custom_effect_tooltip = nf_SAV_dimitrovskaya.4.a.tt
		add_stability = -0.1
		add_war_support = 0.05
		add_power_balance_value = {
			id = SAV_power_balance
			value = -0.05
		}
		368 = {
			add_manpower = -10
		}
		hidden_effect = {
			set_country_flag = SAV_satanist_disappearance_country_flag
		}
		ai_chance = {
			base = 50
		}
	}
}

add_namespace = nf_SAV_puppet

country_event = {
    id = nf_SAV_puppet.1
    title = nf_SAV_puppet.1.t
    desc = nf_SAV_puppet.1.d
    picture = "GFX_event (7)"
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = nf_SAV_puppet.1.a
		SAV = { puppet = ROOT }
		ai_chance = {
			factor = 0.5
			modifier = {
    			factor = 50
    			strength_ratio = {
    				tag = SAV
    				ratio < 0.26
				}
    		}
		}
	}
	option = {
		name = nf_SAV_puppet.1.b
		SAV = {
			country_event = { id = nf_SAV_puppet.2 random_days = 2 days = 2 }
		}
		ai_chance = {
			factor = 0.5
			modifier = {
    			factor = 50
    			strength_ratio = {
    				tag = SAV
    				ratio > 0.24
				}
    		}
		}
	}
}
country_event = {
    id = nf_SAV_puppet.2
    title = nf_SAV_puppet.2.t
    desc = nf_SAV_puppet.2.d
    picture = "GFX_event (17)"
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = nf_SAV_puppet.2.a
		ai_chance = {
			factor = 5
		}
	}
}

add_namespace = nf_SAV_politics 

country_event = {
    id = nf_SAV_politics.1
    title = nf_SAV_politics.1.t
    desc = nf_SAV_politics.1.d
    picture = "GFX_event (15)"
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = nf_SAV_politics.1.a
		add_popularity = {
			ideology = community
			popularity = -0.1
		}
		add_power_balance_value = {
			id = SAV_power_balance
			value = -0.1
		}
		ai_chance = {
			factor = 5
		}
	}
}
country_event = {
    id = nf_SAV_politics.2
    title = nf_SAV_politics.2.t
    desc = nf_SAV_politics.2.d
    picture = "GFX_event (36)"
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = nf_SAV_politics.2.a
		set_politics = { 
			ruling_party = council
		 	elections_allowed = no 
		}
		add_popularity = {
			ideology = council
			popularity = 0.2
		}
		add_political_power = 50
		add_power_balance_value = {
			id = SAV_power_balance
			value = -0.1
		}
		ai_chance = {
			factor = 5
		}
	}
	option = {
		name = nf_SAV_politics.2.b
		set_politics = { 
			ruling_party = oligarch
		 	elections_allowed = no 
		}
		add_popularity = {
			ideology = oligarch
			popularity = 0.2
		}
		add_political_power = 50
		add_power_balance_value = {
			id = SAV_power_balance
			value = -0.1
		}
		ai_chance = {
			factor = 5
		}
	}
	option = {
		name = nf_SAV_politics.2.b
			
		retire_character = SAV_vasyurkov
		add_political_power = 50
		add_country_leader_role = {
		    character = SAV_sergey_mikhailovich_reznitsyn
		    promote_leader = yes
		    country_leader = {
		        ideology = democratic_republic
		        expire = "2100.1.1"
		        traits = { SAV_sergey_mikhailovich_reznitsyn_leader_trait }
		    }
		}
		add_power_balance_value = {
			id = SAV_power_balance
			value = -0.1
		}
		ai_chance = {
			factor = 5
		}
	}
}
country_event = {
    id = nf_SAV_politics.3
    title = nf_SAV_politics.3.t
    desc = nf_SAV_politics.3.d
    picture = "GFX_event (36)"
	is_triggered_only = yes
	fire_only_once = yes

	option = { #Vasyurkovs Infidelity
		name = nf_SAV_politics.3.a
		add_popularity = {
			ideology = community
			popularity = -0.1
		}
		add_power_balance_value = {
			id = SAV_power_balance
			value = -0.1
		}
		hidden_effect = {
			country_event = {
				id = nf_SAV_politics.4 days = 20 random_days = 20
			}
		}
		ai_chance = {
			factor = 5
		}
	}
}
country_event = {
    id = nf_SAV_politics.4
    title = nf_SAV_politics.4.t
    desc = nf_SAV_politics.4.d
    picture = "GFX_event (48)"
	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		hidden_effect = {
			set_country_flag = SAV_leadership_doubt_country_flag
		}
	}
	option = {
		name = nf_SAV_politics.4.a
		custom_effect_tooltip = nf_SAV_politics.4.a.tt
		add_stability = -0.05
		ai_chance = {
			factor = 5
		}
	}
}