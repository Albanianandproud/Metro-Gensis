@border_conflict_escalation_timer = 7
@border_conflict_forgotten_timer = 30
@border_conflict_escalate_to_war_countdown = 45
@border_conflict_time_until_cancelled = 60

bandit_generic_decision_category = {

	bandit_generic_raiding_decision = {
		available = {
			has_completed_focus = bandit_focus_1
			has_war = no
			has_manpower > 9
			has_equipment = {
				infantry_equipment > 9
			}
		}

		fire_only_once = no

		modifier = {
			bullet_income_from_ideas = 30
		}

		days_remove = 120

		custom_cost_trigger = {
			set_temp_variable = { temp_command_power_cost = 30 }
			check_variable = {
				command_power > temp_command_power_cost
			}
		}
		custom_cost_text = "command_power_decisions_cost_text"
		complete_effect = {
			hidden_effect = {
				add_command_power = -30
			}
			add_manpower = -10
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = -10
			}
		}
		remove_effect = {
			add_manpower = 10
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 10
			}
			## We can give flat bullets here on particular focus rewards.
		}
		ai_will_do = {
			base = 5
		}
	}

	bandit_generic_improve_homefront_decision = {
		icon = category_spr_the_seeds_of_revolution

		available = {
			has_stability < 0.71
		}

		fire_only_once = no

		modifier = {
			stability_weekly = 0.005
			industrial_capacity_factory = -0.15
		}

		days_remove = 90
		days_re_enable = 180

		cost = 50

		cancel_trigger = {
			has_war = yes
		}

		ai_will_do = {
			base = 5
			modifier = {
				add = 2
				has_stability < 0.59
			}
			modifier = {
				add = 5
				has_stability < 0.49
			}
		}
	}

	bandit_generic_war_tax_decision = {

		icon = category_spr_the_seeds_of_revolution

		available = {
			has_stability > 0.31
			has_war_support > 0.31

			has_completed_focus = bandit_internal_focus_3
		}

		fire_only_once = no

		cost = 75

		modifier = {
			stability_weekly = -0.008
		    war_support_weekly = -0.008
			bullet_income_from_ideas = 45
		}

		days_remove = 60
		days_re_enable = 360

		cancel_trigger = {
			OR = {
				has_stability < 0.31
				has_war_support < 0.31			
			}
		}

		ai_will_do = {
			base = 5
			modifier = {
				add = 2
				has_stability < 0.59
				has_war_support < 0.59
			}
			modifier = {
				add = 5
				has_stability < 0.49
				has_war_support < 0.49
			}
		}
	}

	bandit_generic_fall_in_line_decision = {

		icon = category_spr_the_seeds_of_revolution

		available = {
			dictatorial > 0.24
			political_power_daily > 0.5
		}

		visible = { has_government = dictatorial }

		custom_cost_trigger = {
			set_temp_variable = { temp_bullet_cost = 50 }
			check_variable = {
				bullet > temp_bullet_cost
			}
		}

		custom_cost_text = "bullet_decisions_cost_text"

		fire_only_once = no

		modifier = {
			dictatorial_drift = 0.5
			political_power_factor = -0.15
		}

		complete_effect = {
			hidden_effect = { 
				set_temp_variable = { bullet_to_gain = 50 }
				add_bullet_with_tooltip_effect = yes
			}
		}

		days_remove = 60
		days_re_enable = 180

		ai_will_do = {
			base = 5
			modifier = {
				add = 2
				has_stability < 0.59
				has_war_support < 0.59
			}
			modifier = {
				add = 5
				has_stability < 0.49
				has_war_support < 0.49
			}
		}
	}

	bandit_generic_rouse_people_decision = {

		icon = category_spr_the_seeds_of_revolution

		available = {
			has_stability < 0.71
			has_war_support < 0.71
		}

		custom_cost_trigger = {
			set_temp_variable = { temp_bullet_cost = 300 }
			check_variable = {
				bullet > temp_bullet_cost
			}
		}
		custom_cost_text = "bullet_decisions_cost_text"

		fire_only_once = no

		modifier = {
			stability_weekly = 0.005
		    war_support_weekly = 0.005
		}

		complete_effect = {
			hidden_effect = { 
				set_temp_variable = { bullet_to_gain = -300 }
				add_bullet_with_tooltip_effect = yes
			}
		}

		days_remove = 84
		days_re_enable = 140

		ai_will_do = {
			base = 5
			modifier = {
				add = 2
				has_stability < 0.59
				has_war_support < 0.59
			}
			modifier = {
				add = 5
				has_stability < 0.49
				has_war_support < 0.49
			}
		}
	}
}

bandit_borderwars_decision_category = {

	bandit_borderwars_create_incident = {
		icon = border_war		

		visible = {
			FROM = { exists = yes }
			NOT = { has_war_with = FROM }
			FROM = {
				NOT = { is_subject_of = ROOT }
				NOT = { is_in_faction_with = ROOT }
			}
			NOT = {
				is_subject_of = FROM
			}
			OR = {
				NOT = { has_border_war_with = FROM }
				FROM = {
					any_owned_state = {
						is_controlled_by = FROM
						impassable = no
						hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
						any_neighbor_state = {
							hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
							is_fully_controlled_by = ROOT
						}
					}
				}
			}
			FROM = { has_not_initiated_border_incident_with_ROOT = yes }  # NOTE this check is very expensive! Use it with caution.
		}

		available = {
			has_completed_focus = bandit_focus_2
			FROM = {
				any_owned_state = {
					is_controlled_by = FROM
					impassable = no
					any_neighbor_state = {
						#state_is_fully_controlled_by_ROOT_or_subject = yes
						set_temp_variable = { var:attacker_state_temp = id }
						has_ROOT_at_least_1_div_in_current_state_scope = yes
						hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
					}
					NOT = { has_state_flag = border_incident_active }
					set_temp_variable = { var:defender_state_temp = id }
				}
			}
			NOT = { has_non_aggression_pact_with = FROM }
		}

		target_array = neighbors

		target_trigger = {
			FROM = { 
				NOT = { original_tag = RUI has_country_flag = is_savage_nation }
				any_neighbor_country = {
					OR = {
						tag = ROOT 
						is_subject_of = ROOT
					}
				}
				
			}
		}

		highlight_states = {
			highlight_states_trigger = {
				OR = {
					state = FROM.defender_state_vs_@ROOT
					AND = {
						is_owned_and_controlled_by = FROM
						impassable = no
						hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
						any_neighbor_state = {
							hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
							has_ROOT_at_least_1_div_in_current_state_scope = yes
							#state_is_fully_controlled_by_ROOT_or_subject = yes
						}
					}
				}
			}
		}

		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		custom_cost_trigger = {
			set_temp_variable = { temp_command_power_cost = 30 }
			check_variable = {
				command_power > temp_command_power_cost
			}
		}
		custom_cost_text = "command_power_decisions_cost_text"
		complete_effect = {
			hidden_effect = {
				add_command_power = -30
			}
		}

		days_remove = @border_conflict_escalation_timer
		days_re_enable = 180

		war_with_target_on_remove = yes

		complete_effect = {
			hidden_effect = {
				FROM = {
					random_owned_controlled_state = {
						limit = {
							impassable = no
							hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
							any_neighbor_state = {
								hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
								has_ROOT_at_least_1_div_in_current_state_scope = yes
								#state_is_fully_controlled_by_ROOT_or_subject = yes
							}
						}
						save_event_target_as = defender_state
						set_variable = { FROM.defender_state_vs_@ROOT = id }
						set_temp_variable = { defender_state_temp = id }
						set_state_flag = border_incident_active
					}
				}
				random_state = {
					limit = {
						impassable = no
						#state_is_fully_controlled_by_ROOT_or_subject = yes
						hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
						has_ROOT_at_least_1_div_in_current_state_scope = yes
						any_neighbor_state = {
							state = var:FROM.defender_state_vs_@ROOT
						}
					}
					save_event_target_as = attacker_state
					set_variable = { FROM.attacker_state_vs_@ROOT = id }
					set_temp_variable = { attacker_state_temp = id }
					set_state_flag = border_incident_active
				}
			}
			custom_effect_tooltip = WTT_border_incident_delay_until_new_incident_180
			FROM = {
				country_event = { id = wtt_border_incident_defender_warning.1 hours = 1 }
				activate_targeted_decision = { target = ROOT decision = bandit_borderwars_decision_incident_warning_defender }				
			}
		}
		remove_effect = {
			hidden_effect = {
				var:FROM.defender_state_vs_@ROOT = {
					save_event_target_as = defender_state 
				}
				var:FROM.attacker_state_vs_@ROOT = {
					save_event_target_as = attacker_state 
				}
				FROM = {
					random_owned_controlled_state = {
						limit = {
							impassable = no
							hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
							any_neighbor_state = {
								#state_is_fully_controlled_by_ROOT_or_subject = yes
								has_ROOT_at_least_1_div_in_current_state_scope = yes
								hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
							}
						}
						set_temp_variable = { defender_state_temp = id }
					}
				}
				random_state = {
					limit = {
						impassable = no
						#state_is_fully_controlled_by_ROOT_or_subject = yes
						hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
						has_ROOT_at_least_1_div_in_current_state_scope = yes
						any_neighbor_state = {
							state = var:FROM.defender_state_vs_@ROOT
						}
					}
					set_temp_variable = { attacker_state_temp = id }
				}
			}
			activate_targeted_decision = { target = FROM decision = WTT_escalate_incident_to_border_conflict }
		}
	}

	#Mission for defender warning that a conflict with FROM is coming
	bandit_borderwars_decision_incident_warning_defender = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			hidden_trigger = { always = no }
		}

		highlight_states = {
			highlight_state_targets = {
				state = var:defender_state_temp
				state = var:ROOT.defender_state_vs_@FROM
			} 
		}

		war_with_target_on_timeout = yes
		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		days_mission_timeout = @border_conflict_escalation_timer

		fire_only_once = yes

		is_good = no
		
		timeout_effect = {
			custom_effect_tooltip = escalation_possible_tooltip_for_defender
			custom_effect_tooltip = effects_if_border_conflict_is_lost
			effect_tooltip = {
				add_political_power = -100
				var:ROOT.defender_state_vs_@FROM = { FROM = { transfer_state = PREV } }
			}
			hidden_effect = {
				remove_targeted_decision = { target = FROM decision = bandit_borderwars_decision_incident_warning_defender }
				activate_targeted_decision = { target = FROM decision = bandit_borderwars_decision_escalation_warning_defender }
			}
		}
	}

	#Mission for defender warning FROM can escalate to war at any point is coming
	bandit_borderwars_decision_escalation_warning_defender = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			hidden_trigger = { always = no }
		}

		highlight_states = {
 		highlight_state_targets = {
				state = var:defender_state_temp
				state = var:ROOT.defender_state_vs_@FROM
			} 
		}

		war_with_target_on_timeout = yes
		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		days_mission_timeout = @border_conflict_forgotten_timer

		fire_only_once = yes

		is_good = no

		timeout_effect = {
			custom_effect_tooltip = from_cannot_escalate
			custom_effect_tooltip = effects_if_border_conflict_is_lost
			effect_tooltip = {
				add_political_power = -100
				var:ROOT.defender_state_vs_@FROM = { FROM = { transfer_state = PREV } }
			}
		}		
	}

	#Mission for attacker to escalate or incident is forgotten
	#Decision to escalate incident on border with FROM to border conflict
	WTT_escalate_incident_to_border_conflict = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			var:FROM.attacker_state_vs_@ROOT = {
				#state_is_fully_controlled_by_ROOT_or_subject = yes
			}
			divisions_in_border_state = {
				state = var:FROM.attacker_state_vs_@ROOT
				border_state = var:FROM.defender_state_vs_@ROOT
				size > 0
			}
		}

		highlight_states = {
 			highlight_state_targets = {
				state = var:FROM.attacker_state_vs_@ROOT			
			} 
		}

		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		cancel_trigger = {
			is_in_faction_with = FROM
		}

		selectable_mission = yes

		fire_only_once = yes #Reactivation handled in effect

		days_mission_timeout = @border_conflict_forgotten_timer

		timeout_effect = {
			custom_effect_tooltip = WTT_border_incident_delay_until_new_incident_120
			hidden_effect = {
				FROM = { remove_targeted_decision = { target = ROOT decision = bandit_borderwars_decision_escalation_warning_defender } }
				FROM = {
					var:attacker_state_vs_@ROOT = {
						clr_state_flag = border_incident_active
					}
					var:defender_state_vs_@ROOT = {
						clr_state_flag = border_incident_active
					}
					clear_variable = attacker_state_vs_@ROOT
					clear_variable = defender_state_vs_@ROOT
				}
			}
		}

		complete_effect = {
			start_border_war = {
				change_state_after_war = no
				attacker = {
					state = var:FROM.attacker_state_vs_@ROOT
					num_provinces = 4
					on_win = wtt_border_conflict_won_attacker.1
					on_lose = wtt_border_conflict_lost_attacker.1
					on_cancel = wtt_border_conflict_canceled_attacker.1
				}
				
				defender = {
					state = var:FROM.defender_state_vs_@ROOT
					num_provinces = 4
					on_win = wtt_border_conflict_won_defender.1
					on_lose = wtt_border_conflict_lost_defender.1
					on_cancel = wtt_border_conflict_canceled_defender.1
				}
			}
			FROM = {
				activate_targeted_decision = { target = ROOT decision = bandit_borderwars_decision_escalate_conflict }
				activate_targeted_decision = { target = ROOT decision = bandit_borderwars_decision_time_until_cancelled }
			}
			activate_targeted_decision = { target = FROM decision = bandit_borderwars_decision_escalate_conflict }
			activate_targeted_decision = { target = FROM decision = bandit_borderwars_decision_time_until_cancelled }
		}
	}

	#Mission for attacker to win border war against FROM in X days
	bandit_borderwars_decision_time_until_cancelled = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			var:FROM.defender_state_vs_@ROOT = { has_border_war = no }
			var:FROM.attacker_state_vs_@ROOT = { has_border_war = no }
		}
		
		highlight_states = {
 			highlight_state_targets = {
				state = var:defender_state_temp
				state = var:FROM.defender_state_vs_@ROOT
			} 
		}

		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		days_mission_timeout = @border_conflict_time_until_cancelled
		is_good = no

		fire_only_once = yes #Reactivation handled in effect

		complete_effect = {

		}

		timeout_effect = {
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				cancel_border_war = {
					defender = var:defender_state_vs_@FROM
					attacker = var:attacker_state_vs_@FROM
				}
			}
			else = {
				cancel_border_war = {
					defender = var:FROM.defender_state_vs_@ROOT
					attacker = var:FROM.attacker_state_vs_@ROOT
				}
			}
			hidden_effect = {
				remove_targeted_decision = { target = FROM decision = bandit_borderwars_decision_escalate_conflict }
			}
		}
	}

	#Decision to escalate conflict further
	bandit_borderwars_decision_escalate_conflict = {

		icon = decision_generic_ignite_civil_war

		allowed = { always = no } #Activated from effect

		visible = {
			has_border_war_with = FROM
		}

		highlight_states = {
 			highlight_state_targets = {
				state = var:FROM.attacker_state_vs_@ROOT
				state = var:ROOT.defender_state_vs_@FROM
			} 
		}

		custom_cost_trigger = {
			set_temp_variable = { temp_command_power_cost = 50 }
			check_variable = {
				command_power > temp_command_power_cost
			}
		}
		custom_cost_text = "command_power_decisions_cost_text"
		complete_effect = {
			hidden_effect = {
				add_command_power = -50
			}
		}

		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		fire_only_once = yes #Reactivation handled in effect

		complete_effect = {
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				set_border_war_data = {
					attacker = var:ROOT.defender_state_vs_@FROM
					defender = var:ROOT.defender_state_vs_@FROM
					defender_modifier = 0.15
					combat_width = 100
				}
			}
			else = {
				set_border_war_data = {
					attacker = var:FROM.defender_state_vs_@ROOT
					defender = var:FROM.defender_state_vs_@ROOT
					attacker_modifier = 0.15
					combat_width = 100
				}
			}
			FROM = {
				set_country_flag = {
					flag = WTT_border_conflict_escalate_to_war_cooldown_@ROOT
					days = @border_conflict_escalate_to_war_countdown
					value = 1
				}
				remove_targeted_decision = { target = ROOT decision = bandit_borderwars_decision_escalate_conflict }
			}
			set_country_flag = {
				flag = WTT_border_conflict_escalate_to_war_cooldown_@FROM
				days = @border_conflict_escalate_to_war_countdown
				value = 1
			}
			custom_effect_tooltip = in_45_days
			activate_targeted_decision = { target = FROM decision = WTT_border_conflict_escalate_to_war }
		}
	}

	#Decision to escalate conflict further
	WTT_border_conflict_escalate_to_war = {

		icon = decision_generic_ignite_civil_war

		allowed = { always = no } #Activated from effect

		visible = {
			NOT = { has_country_flag = WTT_border_conflict_escalate_to_war_cooldown_@FROM }
			has_border_war_with = FROM
		}

		highlight_states = {
 			highlight_state_targets = {
				state = var:FROM.defender_state_vs_@ROOT
				state = var:ROOT.attacker_state_vs_@FROM
			} 
		}

		custom_cost_trigger = {
			set_temp_variable = { temp_command_power_cost = 50 }
			check_variable = {
				command_power > temp_command_power_cost
			}
		}
		custom_cost_text = "command_power_decisions_cost_text"
		complete_effect = {
			hidden_effect = {
				add_command_power = -50
			}
		}

		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		days_remove = 7

		fire_only_once = yes #Reactivation handled in effect

		war_with_target_on_remove = yes

		complete_effect = {
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				var:ROOT.defender_state_vs_@FROM = { save_event_target_as = their_state }
				var:ROOT.attacker_state_vs_@FROM = { save_event_target_as = our_state }
			}
			else = {
				var:FROM.defender_state_vs_@ROOT = { save_event_target_as = our_state }
				var:FROM.attacker_state_vs_@ROOT = { save_event_target_as = their_state }
			}
			FROM = {
				country_event = { id = wtt_border_conflict_escalate_to_war.1 }
				hidden_effect = {
					remove_targeted_decision = { target = ROOT decision = WTT_border_conflict_escalate_to_war }
				}
		 	}
		}

		remove_effect = {
			cancel_border_war = {
				dont_fire_events = yes
				defender = var:FROM.defender_state_vs_@ROOT
				attacker = var:FROM.attacker_state_vs_@ROOT
			}
			declare_war_on = { target = FROM type = annex_everything }
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				var:attacker_state_vs_@FROM = {
					clr_state_flag = border_incident_active
				}
				var:defender_state_vs_@FROM = {
					clr_state_flag = border_incident_active
				}
				clear_variable = attacker_state_vs_@FROM
				clear_variable = defender_state_vs_@FROM
			}
			else = {
				FROM = {
					var:attacker_state_vs_@ROOT = {
						clr_state_flag = border_incident_active
					}
					var:defender_state_vs_@ROOT = {
						clr_state_flag = border_incident_active
					}
					clear_variable = attacker_state_vs_@ROOT
					clear_variable = defender_state_vs_@ROOT
				}
			}
		}
	}

	#Decision to back down from conflict
	bandit_borderwars_decision_back_out = {

		allowed = { always = no } #Activated from effect

		visible = {
			has_border_war_with = FROM
		}

		highlight_states = {
 			highlight_state_targets = {
				state = var:FROM.attacker_state_vs_@ROOT
				state = var:ROOT.defender_state_vs_@FROM
			} 
		}

		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		fire_only_once = yes #Reactivation handled in effect

		complete_effect = {
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				finalize_border_war = {
					attacker_win = yes
					attacker = ROOT.attacker_state_vs_@FROM
					defender = ROOT.attacker_state_vs_@FROM
				}
			}
			else = {
				finalize_border_war = {
					attacker = FROM.attacker_state_vs_@ROOT
					defender = FROM.attacker_state_vs_@ROOT
					defender_win = yes
				}
			}
		}
	}
}

bandit_internal_decision_category = {

	## One Mission
	## Get either 80% stability, or 80% war support in timer
	## no maluses if fail
	## but success grants quick ability to pursue war goals

	bandit_internal_decision_timed_mission = {
		icon = binoculars
		priority = 1001

		activation  = {
			hidden_trigger = { has_country_flag = bandit_internal_decision_timed_mission_flag }
		}

		available = {
			NOT = {
				has_country_flag = bandit_internal_decision_timed_mission_flag
			}
			count_triggers = {
				amount = 1
				has_army_manpower = {
    				size > 99
				}
				num_of_military_factories > 4
			}
		}

		visible = {
			NOT = {
				has_country_flag = bandit_internal_decision_timed_mission_flag
			}
		}

		selectable_mission = no
		is_good = yes
		fire_only_once = yes

		cancel_trigger = {
			NOT = {
				has_active_mission = bandit_internal_decision_timed_mission
			}
		}

		days_mission_timeout = 720

		timeout_effect = {
			add_political_power = 150
			army_experience = 50
		}

		ai_will_do = {
			factor = 101
		}
	}

	bandit_internal_decision_2_timed_mission = {
		icon = binoculars
		priority = 1001

		activation  = {
			hidden_trigger = { has_country_flag = bandit_internal_decision_2_timed_mission_flag }
		}

		available = {
			NOT = {
				has_country_flag = bandit_internal_decision_2_timed_mission_flag
			}
			count_triggers = {
				amount = 1
				if = {
					limit = {
						has_completed_focus = bandit_external_2
					}
					has_stability > 0.49
				}
				if = {
					limit = {
						has_completed_focus = bandit_external_1
					}
					has_war_support > 0.49
				}
				custom_trigger_tooltip = {
					tooltip = "has_specified_party_popularity"
					set_temp_variable = { party_popularity_percentage = 0.5 }
					has_specified_party_popularity = yes
				}
			}
		}

		visible = {
			NOT = {
				has_country_flag = bandit_internal_decision_2_timed_mission_flag
			}
		}

		selectable_mission = no
		is_good = yes
		fire_only_once = yes

		cancel_trigger = {
			NOT = {
				has_active_mission = bandit_internal_decision_2_timed_mission
			}
		}

		days_mission_timeout = 480

		timeout_effect = {
			country_event = { id = bandit_event.5 }

			if = {
				limit = {
					custom_trigger_tooltip = {
						tooltip = "has_specified_party_popularity"
						set_temp_variable = { party_popularity_percentage = 0.5 }
						has_specified_party_popularity = yes
					}
				}
				complete_national_focus = bandit_external_1A
				complete_national_focus = bandit_external_2A
			}
		}

		ai_will_do = {
			factor = 101
		}
	}

	bandit_internal_aim_timed_mission = {
		icon = binoculars
		priority = 1001

		activation  = {
			has_country_flag = bandit_internal_aim_timed_mission_flag
		}

		available = {
			NOT = {
				has_country_flag = bandit_internal_aim_timed_mission_flag
			}
			count_triggers = {
				amount = 1
				has_war = yes


				custom_trigger_tooltip = {
					tooltip = "has_specific_amount_of_bullet_text"
					set_temp_variable = { has_specific_amount_of_bullet  = 2000 }
					check_variable = {
						bullet > has_specific_amount_of_bullet 
					}
				}
			}
		}

		visible = {
			NOT = {
				has_country_flag = bandit_internal_aim_timed_mission_flag
			}
		}

		selectable_mission = no
		is_good = yes
		fire_only_once = yes

		cancel_trigger = {
			NOT = {
				has_active_mission = bandit_internal_aim_timed_mission
			}
		}

		days_mission_timeout = 720

		timeout_effect = {
			add_political_power = 200

			if = { limit = { has_government = community } add_popularity = { ideology = community popularity = 0.1 } }
			if = { limit = { has_government = council } add_popularity = { ideology = council popularity = 0.1 } }
			if = { limit = { has_government = oligarch } add_popularity = { ideology = oligarch popularity = 0.1 } }
			if = { limit = { has_government = dictatorial } add_popularity = { ideology = dictatorial popularity = 0.1 } }
		}

		ai_will_do = {
			factor = 101
		}
	}
}

bandit_coercion_decision_category = {

	bandit_coercion_demand_tribute = {
		available = {
			has_completed_focus = bandit_focus_3
		}

		target_array = neighbors

		target_trigger = {
			FROM = {
				NOT = { 
					original_tag = RUI
					has_country_flag = is_savage_nation
					has_country_flag = is_mutant_nation
					is_acting_performer = yes 
				}
			}
		}

		cost = 100
		days_remove = 2
		days_re_enable = 180

		remove_effect = {
			custom_effect_tooltip = bandit_coercion_demand_tribute_tt
			## tooltip to show if FROM submits
			FROM = { country_event = { id = bandit_event_coercion.1 } }
			custom_effect_tooltip = if_they_accept_tt
			bandit_coercion_demand_tribute_scripted_effect_tooltip = yes
		}


		ai_will_do = {
			base = 5
			modifier = {
				## check army strength ratio, if less than 50% pursue
			}
		}
	}

	bandit_coercion_demand_subjugation = {
		target_array = neighbors

		target_trigger = {
			FROM = {
				has_country_flag = bandit_can_subjugate@PREV
			}
		}

		cost = 100

		remove_effect = {
			custom_effect_tooltip = bandit_coercion_demand_subjugation_tt
			## tooltip to show if FROM submits
			FROM = { country_event = { id = bandit_event_coercion.4 } }
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = {
				ROOT = { puppet = FROM }
			}
		}
	}

	bandit_coercion_demand_tribute_retaliation_mission = {

		target_array = neighbors

		target_trigger = {
			FROM = {
				has_country_flag = bandit_can_tribute_retaliate
			}
		}

		available = {
			FROM = {
				any_owned_state = {
					is_controlled_by = FROM
					impassable = no
					any_neighbor_state = {
						#state_is_fully_controlled_by_ROOT_or_subject = yes
						set_temp_variable = { var:attacker_state_temp = id }
						has_ROOT_at_least_1_div_in_current_state_scope = yes
						hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
					}
					NOT = { has_state_flag = border_incident_active }
					set_temp_variable = { var:defender_state_temp = id }
				}
			}
		}

		highlight_states = {
			highlight_states_trigger = {
				OR = {
					state = FROM.defender_state_vs_@ROOT
					AND = {
						is_owned_and_controlled_by = FROM
						impassable = no
						hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
						any_neighbor_state = {
							hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
							has_ROOT_at_least_1_div_in_current_state_scope = yes
							#state_is_fully_controlled_by_ROOT_or_subject = yes
						}
					}
				}
			}
		}

		cost = 0
		days_remove = 7

		war_with_target_on_remove = yes

		remove_effect = {
			hidden_effect = {
				FROM = {
					random_owned_controlled_state = {
						limit = {
							impassable = no
							hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
							any_neighbor_state = {
								hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
								has_ROOT_at_least_1_div_in_current_state_scope = yes
								#state_is_fully_controlled_by_ROOT_or_subject = yes
							}
						}
						save_event_target_as = defender_state
						set_variable = { FROM.defender_state_vs_@ROOT = id }
						set_temp_variable = { defender_state_temp = id }
						set_state_flag = border_incident_active
					}
				}
				random_state = {
					limit = {
						impassable = no
						#state_is_fully_controlled_by_ROOT_or_subject = yes
						hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
						has_ROOT_at_least_1_div_in_current_state_scope = yes
						any_neighbor_state = {
							state = var:FROM.defender_state_vs_@ROOT
						}
					}
					save_event_target_as = attacker_state
					set_variable = { FROM.attacker_state_vs_@ROOT = id }
					set_temp_variable = { attacker_state_temp = id }
					set_state_flag = border_incident_active
				}
			}
		}

		complete_effect = {
			start_border_war = {
				change_state_after_war = no
				attacker = {
					state = var:FROM.attacker_state_vs_@ROOT
					num_provinces = 3
					on_win = bandit_border_conflict_won_attacker.1
					on_lose = bandit_border_conflict_lost_attacker.1
					on_cancel = wtt_border_conflict_canceled_attacker.1
				}
				
				defender = {
					state = var:FROM.defender_state_vs_@ROOT
					num_provinces = 3
					on_win = bandit_border_conflict_won_defender.1
					on_lose = bandit_border_conflict_lost_defender.1
					on_cancel = wtt_border_conflict_canceled_defender.1
				}
			}
		}
		ai_will_do = {
			base = 5
			modifier = {
				## check army strength ratio, if less than 50% pursue
			}
		}
	}
}