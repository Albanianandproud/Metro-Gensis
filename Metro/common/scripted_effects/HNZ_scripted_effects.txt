tunnel_cleansers_improve = {
	if = {
		limit = {
			has_idea = HNZ_tunnel_cleansers
		}
		swap_ideas = {
			remove_idea = HNZ_tunnel_cleansers
			add_idea = HNZ_tunnel_cleansers_2
		}
	}
}
reclamation_improve = {
	if = {
		limit = {
			has_idea = HNZ_reclamation_bureau
		}
		swap_ideas = {
			remove_idea = HNZ_reclamation_bureau
			add_idea = HNZ_reclamation_bureau_2
		}
	}
}
expeditions_improve = {
	if = {
		limit = {
			has_idea = HNZ_stalker_expeditions
		}
		swap_ideas = {
			remove_idea = HNZ_stalker_expeditions
			add_idea = HNZ_stalker_expeditions_2
		}
	}
}
centralise_commonwealth = {
	if = {
		limit = {
			has_idea = HNZ_decentralized_commonwealth
		}
		swap_ideas = {
			remove_idea = HNZ_decentralized_commonwealth
			add_idea = HNZ_decentralized_commonwealth_3
		}
	}
	else_if = {
		limit = {
			has_idea = HNZ_decentralized_commonwealth_3
		}
		swap_ideas = {
			remove_idea = HNZ_decentralized_commonwealth_3
			add_idea = HNZ_decentralized_commonwealth_2
		}
	}
	else_if = {
		limit = {
			has_idea = HNZ_decentralized_commonwealth_2
		}
		swap_ideas = {
			remove_idea = HNZ_decentralized_commonwealth_2
			add_idea = HNZ_decentralized_commonwealth_1
		}
	}
	else_if = {
		limit = {
			has_idea = HNZ_decentralized_commonwealth_1
		}
		remove_ideas = HNZ_decentralized_commonwealth_1
	}
}
HNZ_mutant_purge_scripted_effect = {
	if = {
		limit = {
			any_neighbor_country = {
				has_country_flag = is_mutant_nation
				has_country_flag = is_savage_nation
				has_country_flag = is_skaven_nation
			}
		}
		custom_effect_tooltip = HNZ_agenda_failure
		country_event = nf_HNZ.42 # Failure Event
	}
	else_if = {
		limit = {
			any_neighbor_country = {
				NOT = {
					has_country_flag = is_mutant_nation
					has_country_flag = is_savage_nation
					has_country_flag = is_skaven_nation
				}
			}
		}
		country_event = nf_HNZ.41 # Completion event
		add_ideas = HNZ_purge_the_unclean
		custom_effect_tooltip = HNZ_gain_political_control
		hidden_effect = { add_to_variable = { var = HNZ_political_authority value = 1 } }
	}
}


HNZ_moscow_awakes_scripted_effect = {
	HNZ = {
		set_cosmetic_tag = HNZ_invisible_observers_tag
		set_politics = { 
			ruling_party = dictatorial
			elections_allowed = no 
		}
	}
	add_threat = 10
	ROOT = { news_event = { id = global_event.68 } }

	retire_ideology_leader = dictatorial 
	add_country_leader_role = {
		character = HNZ_invisible_observer
		promote_leader = yes
		country_leader = {
			ideology = totalitarianism
			expire = "2999.9.9"
			traits = { HNZ_russia_government_remnants }
		}
	} 
}

HNZ_civil_war_scripted_effect = {
	if = {
		limit = {
			NOT = { has_country_flag = HNZ_bypass_civil_war }
		}
		release = SRL
		add_civil_war_target = SRL
		declare_war_on = {
			target = SRL
			type = civil_war
		}
		transfer_units_fraction= {
			target = SRL
			size = 0.5
			stockpile_ratio = 0.5
		}
		hidden_effect = {
			SRL = {
				division_template = {
					name = "Caravan Levies"
					priority = 1
					template_counter = 0
					regiments = {
						irregulars =  { x = 0 y = 0 }
						irregulars =  { x = 1 y = 0 }
						irregulars =  { x = 2 y = 0 }
						irregulars =  { x = 3 y = 0 }
						irregulars =  { x = 4 y = 0 }
					}
					support = {
						logistics_company  = { x = 0 y = 1 }    
					}
				}
				capital_scope = {
					create_unit = {
						division = "name = \"1st Volunteer Militia\" division_template = \"Caravan Levies\" start_experience_factor = 1 start_equipment_factor = 1"
						owner = ROOT
					}
					create_unit = {
						division = "name = \"2nd Volunteer Militia\" division_template = \"Caravan Levies\" start_experience_factor = 1 start_equipment_factor = 1"
						owner = ROOT
					}
					create_unit = {
						division = "name = \"3rd Volunteer Militia\" division_template = \"Caravan Levies\" start_experience_factor = 1 start_equipment_factor = 1"
						owner = ROOT
					}
					create_unit = {
						division = "name = \"4th Volunteer Militia\" division_template = \"Caravan Levies\" start_experience_factor = 1 start_equipment_factor = 1"
						owner = ROOT
					}
				}
			}
		}
	}
}